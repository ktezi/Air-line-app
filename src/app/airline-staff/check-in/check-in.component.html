<app-seat-map></app-seat-map>

<div class="row">
  <!-- filter Option -->
    <div class="col-sm-4 col-md-4">
      <mat-form-field class="filter-field">
        <mat-select #select placeholder="selectFilter" (selectionChange)="applyFilter($event.value)">
          <mat-option *ngFor="let version of versions" [value]="version">
            {{version}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button mat-flat-button color="warn" class="reset-btn" (click)="applyFilter('reset')">Reset</button> 
    </div>
  
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>
  
        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
  
        <!-- Ancillary services Column -->
        <ng-container matColumnDef="ancillaryServices">
          <th mat-header-cell *matHeaderCellDef mat-sort-header4> Ancillary Services </th>
          <td mat-cell *matCellDef="let element">
            <ng-container *ngFor="let item of element.ancillaryServices | keyvalue">
              <div class="abc" *ngIf="item.value">
                <span> {{item.key}} </span> :
                <span>{{item.value}} </span>
              </div>
            </ng-container>
          </td>
        </ng-container>
  
  
  
        <!-- seat-id Column -->
        <ng-container matColumnDef="seatId">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Seat Id </th>
          <td mat-cell *matCellDef="let element" class="desc"> {{element.seatId}} </td>
        </ng-container>

         <!-- Status Column -->
        <ng-container matColumnDef="CheckedIn">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
          <td mat-cell *matCellDef="let element" class="desc" >    
            <ng-container class="abc" *ngIf="element.ischeckedIn">
              Checked In
            </ng-container >
            <ng-container  class="abc" *ngIf="!element.ischeckedIn">
              Not Checked In
            </ng-container >
          </td>
        </ng-container>
  
        <ng-container matColumnDef="button">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Action </th>
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="add-update-btn">button</th>
        <td mat-cell *matCellDef="let element">
          <button mat-stroked-button color="accent" (click)="openDialog(element)"> Change Seat </button>
          <button mat-stroked-button color="accent" (click)="CheckedIn(element)"> Change Status </button>
        </td>
      </ng-container>
        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
  </div>

   <!-- Seat Dialog -->
  <ng-template class="myForm" #dialog_template>
    <mat-table [dataSource]="dataSource1" class="mat-elevation-z8 seat_layout">

      <!--  Column -->
      <ng-container matColumnDef="0">
          <mat-header-cell *matHeaderCellDef>  </mat-header-cell>
          <mat-cell *matCellDef="let element"> {{element['0']}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="1">
        <mat-header-cell *matHeaderCellDef> 1 </mat-header-cell>
        <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(1 , element['0'])" (click)="handleClick(1 , element['0'])"> </span> </mat-cell>
      </ng-container>
    
      <ng-container matColumnDef="2">
        <mat-header-cell *matHeaderCellDef> 2 </mat-header-cell>
        <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(2 , element['0'])" (click)="handleClick(2 , element['0'])"> </span> </mat-cell>
      </ng-container>
    
      <ng-container matColumnDef="3">
        <mat-header-cell *matHeaderCellDef> 3 </mat-header-cell>
        <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(3 , element['0'])" (click)="handleClick(3 , element['0'])"> </span> </mat-cell>
      </ng-container>
    
      <ng-container matColumnDef="4">
        <mat-header-cell *matHeaderCellDef> 4 </mat-header-cell>
        <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(4 , element['0'])" (click)="handleClick(4 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
      <ng-container matColumnDef="5">
          <mat-header-cell *matHeaderCellDef> 5 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(5 , element['0'])" (click)="handleClick(5 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
        <ng-container matColumnDef="6">
          <mat-header-cell *matHeaderCellDef> 6 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(6 , element['0'])" (click)="handleClick(6 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
        <ng-container matColumnDef="7">
          <mat-header-cell *matHeaderCellDef> 7 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(7 , element['0'])" (click)="handleClick(7 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
        <ng-container matColumnDef="8">
          <mat-header-cell *matHeaderCellDef> 8 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(8 , element['0'])" (click)="handleClick(8 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
        <ng-container matColumnDef="9">
          <mat-header-cell *matHeaderCellDef> 9 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(9 , element['0'])" (click)="handleClick(9 , element['0'])"> </span> </mat-cell>
      </ng-container>
  
        <ng-container matColumnDef="10">
          <mat-header-cell *matHeaderCellDef> 10 </mat-header-cell>
          <mat-cell *matCellDef="let element"> <span class="seat-box" [ngClass]="getClassname(10 , element['0'])" (click)="handleClick(10 , element['0'])"> </span> </mat-cell>
      </ng-container>
    
      <mat-header-row *matHeaderRowDef="displayedColumns1"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns1;"></mat-row>
    </mat-table>
  </ng-template>
